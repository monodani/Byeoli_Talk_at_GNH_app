{
  "name": "ğŸŒŸ ë²¼ë¦¬í†¡@ê²½ìƒë‚¨ë„ì¸ì¬ê°œë°œì› (ê²½ë‚¨ì¸ì¬ê°œë°œì› RAG ì±—ë´‡)",
  "image": "mcr.microsoft.com/devcontainers/python:3.11-bullseye",
  
  "features": {
    "ghcr.io/devcontainers/features/python:1": {
      "version": "3.11",
      "installJupyterlab": false,
      "configureGitAliases": true
    },
    "ghcr.io/devcontainers/features/node:1": {
      "version": "18",
      "nodeGypDependencies": true
    },
    "ghcr.io/devcontainers/features/git:1": {
      "ppa": true,
      "version": "latest"
    },
    "ghcr.io/devcontainers/features/common-utils:2": {
      "installZsh": true,
      "configureZshAsDefaultShell": true,
      "installOhMyZsh": true,
      "upgradePackages": true
    }
  },

  "containerEnv": {
    "PYTHONPATH": "/workspaces/Byeoli_Talk_at_GNH_app",
    "PYTHONUNBUFFERED": "1",
    "PYTHONDONTWRITEBYTECODE": "1",
    "STREAMLIT_SERVER_PORT": "8501",
    "STREAMLIT_SERVER_ADDRESS": "0.0.0.0",
    "STREAMLIT_BROWSER_GATHER_USAGE_STATS": "false"
  },

  "onCreateCommand": [
    "sudo apt-get update",
    "sudo apt-get install -y tesseract-ocr tesseract-ocr-kor tesseract-ocr-script-hang fonts-nanum fonts-noto-cjk",
    "sudo apt-get install -y poppler-utils libpoppler-cpp-dev",
    "sudo apt-get install -y tree htop curl wget",
    "echo 'âœ… ì‹œìŠ¤í…œ íŒ¨í‚¤ì§€ ì„¤ì¹˜ ì™„ë£Œ'"
  ],

  "postCreateCommand": [
    "pip install --upgrade pip setuptools wheel",
    "pip install -r requirements.txt",
    "make setup",
    "echo 'ğŸ‰ ë²¼ë¦¬í†¡ ê°œë°œí™˜ê²½ êµ¬ì¶• ì™„ë£Œ!'"
  ],

  "postStartCommand": [
    "echo 'ğŸŒŸ ë²¼ë¦¬í†¡ ê°œë°œí™˜ê²½ ì‹œì‘'",
    "echo 'ğŸ“‹ ì‚¬ìš© ê°€ëŠ¥í•œ ëª…ë ¹ì–´:'",
    "echo '  make help              - ëª¨ë“  ëª…ë ¹ì–´ ë³´ê¸°'",
    "echo '  make test-quick        - ë¹ ë¥¸ ì—°ê²° í…ŒìŠ¤íŠ¸'",
    "echo '  make build-index       - ì¸ë±ìŠ¤ ë¹Œë“œ'",
    "echo '  make run               - Streamlit ì•± ì‹¤í–‰'",
    "echo '  streamlit run app.py   - ì•± ì§ì ‘ ì‹¤í–‰'",
    "echo ''",
    "echo 'ğŸ”§ í•„ìš”í•œ í™˜ê²½ë³€ìˆ˜:'",
    "echo '  OPENAI_API_KEY         - OpenAI API í‚¤'",
    "echo ''",
    "echo 'ğŸ“‚ í”„ë¡œì íŠ¸ êµ¬ì¡°:'",
    "make show-structure"
  ],

  "customizations": {
    "vscode": {
      "extensions": [
        "ms-python.python",
        "ms-python.pylint",
        "ms-python.black-formatter",
        "ms-python.isort",
        "ms-python.vscode-pylance",
        "ms-toolsai.jupyter",
        "charliermarsh.ruff",
        "ms-vscode.makefile-tools",
        "redhat.vscode-yaml",
        "ms-vscode.vscode-json",
        "GitHub.copilot",
        "GitHub.copilot-chat",
        "ms-vscode.live-server",
        "bradlc.vscode-tailwindcss",
        "streetsidesoftware.code-spell-checker",
        "ms-vscode.hexeditor",
        "alefragnani.project-manager",
        "eamodio.gitlens",
        "ms-vscode.remote-repositories"
      ],
      "settings": {
        "python.defaultInterpreterPath": "/usr/local/bin/python",
        "python.linting.enabled": true,
        "python.linting.pylintEnabled": false,
        "python.linting.ruffEnabled": true,
        "python.formatting.provider": "black",
        "python.formatting.blackArgs": ["--line-length=120"],
        "python.isortArgs": ["--profile", "black"],
        "python.analysis.typeCheckingMode": "basic",
        "python.analysis.autoImportCompletions": true,
        "python.analysis.autoSearchPaths": true,
        "python.terminal.activateEnvironment": false,
        
        "files.autoSave": "afterDelay",
        "files.autoSaveDelay": 1000,
        "files.trimTrailingWhitespace": true,
        "files.insertFinalNewline": true,
        
        "editor.formatOnSave": true,
        "editor.formatOnPaste": true,
        "editor.rulers": [88, 120],
        "editor.tabSize": 4,
        "editor.insertSpaces": true,
        "editor.wordWrap": "on",
        "editor.minimap.enabled": true,
        "editor.suggestSelection": "first",
        "editor.codeActionsOnSave": {
          "source.organizeImports": true,
          "source.fixAll": true
        },

        "terminal.integrated.defaultProfile.linux": "zsh",
        "terminal.integrated.fontSize": 14,
        "terminal.integrated.cursorBlinking": true,
        
        "makefile.configureOnOpen": true,
        
        "json.schemas": [
          {
            "fileMatch": ["schemas/*.schema.json"],
            "url": "https://json-schema.org/draft/2020-12/schema"
          }
        ],

        "files.associations": {
          "*.env.example": "dotenv",
          "Makefile": "makefile",
          "*.schema.json": "json"
        },

        "files.exclude": {
          "**/__pycache__": true,
          "**/*.pyc": true,
          "**/vectorstores/**": true,
          "**/cache/**": true,
          "**/logs/**": true,
          "**/.pytest_cache": true
        },

        "search.exclude": {
          "vectorstores/": true,
          "cache/": true,
          "logs/": true,
          "**/__pycache__": true,
          "**/*.pyc": true
        }
      }
    }
  },

  "forwardPorts": [8501, 8502, 8503],
  "portsAttributes": {
    "8501": {
      "label": "ğŸŒŸ ë²¼ë¦¬í†¡ ë©”ì¸ ì•±",
      "onAutoForward": "notify"
    },
    "8502": {
      "label": "ğŸ”§ ê°œë°œ ì„œë²„",
      "onAutoForward": "ignore"
    },
    "8503": {
      "label": "ğŸ“Š í…ŒìŠ¤íŠ¸ ì„œë²„",
      "onAutoForward": "ignore"
    }
  },

  "mounts": [
    "source=${localWorkspaceFolder}/.env,target=/workspaces/Byeoli_Talk_at_GNH_app/.env,type=bind,consistency=cached",
    "type=volume,source=vscode-extensions,target=/root/.vscode-server/extensions"
  ],

  "remoteUser": "root",
  "overrideCommand": false,
  "shutdownAction": "stopContainer",

  "otherVersions": [
    {
      "version": "python-3.10",
      "image": "mcr.microsoft.com/devcontainers/python:3.10-bullseye"
    },
    {
      "version": "python-3.12", 
      "image": "mcr.microsoft.com/devcontainers/python:3.12-bullseye"
    }
  ],

  "workspaceMount": "source=${localWorkspaceFolder},target=/workspaces/Byeoli_Talk_at_GNH_app,type=bind,consistency=cached",
  "workspaceFolder": "/workspaces/Byeoli_Talk_at_GNH_app",

  "initializeCommand": [
    "echo 'ğŸš€ ë²¼ë¦¬í†¡ ê°œë°œí™˜ê²½ ì´ˆê¸°í™” ì‹œì‘...'",
    "echo 'ğŸ“‹ í•„ìš” ì¡°ê±´ í™•ì¸:'",
    "echo '  âœ… Docker Desktop ì‹¤í–‰ ì¤‘'",
    "echo '  âœ… VS Code Dev Containers í™•ì¥ ì„¤ì¹˜ë¨'",
    "echo '  âš ï¸  .env íŒŒì¼ì— OPENAI_API_KEY ì„¤ì • í•„ìš”'"
  ],

  "updateContentCommand": [
    "pip install --upgrade pip",
    "pip install -r requirements.txt --upgrade",
    "echo 'ğŸ”„ ì˜ì¡´ì„± ì—…ë°ì´íŠ¸ ì™„ë£Œ'"
  ]
}
